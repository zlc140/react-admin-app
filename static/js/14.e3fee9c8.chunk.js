(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{361:function(t,e,n){var a=n(362);"string"===typeof a&&(a=[[t.i,a,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(220)(a,i);a.locals&&(t.exports=a.locals)},362:function(t,e,n){(t.exports=n(219)(!1)).push([t.i,".login-container {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n}\n.login-container .container {\n  position: fixed;\n  background: rgba(255, 255, 255, 0.3);\n  z-index: 999;\n}\n.login-container .form-item {\n  position: relative;\n  margin-bottom: 24px;\n  line-height: 40px;\n}\n.login-container .form-item input {\n  box-sizing: border-box;\n  font-variant: tabular-nums;\n  list-style: none;\n  -webkit-font-feature-settings: 'tnum';\n  font-feature-settings: 'tnum', \"tnum\", \"tnum\";\n  display: inline-block;\n  width: 100%;\n  height: 32px;\n  padding: 4px 11px;\n  color: rgba(0, 0, 0, 0.65);\n  font-size: 14px;\n  line-height: 1.5;\n  background-color: #fff;\n  background-image: none;\n  border: 1px solid #d9d9d9;\n  border-radius: 4px;\n  -webkit-transition: all 0.3s;\n  transition: all 0.3s;\n}\n.login-container .form-item input.has-icon {\n  padding-left: 30px;\n}\n.login-container .form-item .anticon {\n  position: absolute;\n  top: 50%;\n  left: 12px;\n  -webkit-transform: translateY(-50%);\n          transform: translateY(-50%);\n}\n",""])},948:function(t,e,n){"use strict";n.r(e);var a=n(51),i=n(12),o=n(13),r=n(15),s=n(14),c=n(16),l=n(0),u=n.n(l),h=n(35),d=n(1),m=n.n(d),f=n(36),g=n(205),p=n(935),v=function(){function t(e){Object(i.a)(this,t),this.id=e,this.width=window.innerWidth,this.height=window.innerHeight,this.points=[],this.target={},this.canvas=null,this.ctx=null,this.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,this.cancelAnimationFrame=window.cancelAnimationFrame||window.mozCancelAnimationFrame}return Object(o.a)(t,[{key:"createCanvas",value:function(){this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.canvas.style.display="block",this.canvas.width=this.width,this.canvas.height=this.height,this.canvas.style.position="fixed",this.canvas.style.top="0",this.canvas.style.left="0",document.getElementById(this.id).appendChild(this.canvas)}},{key:"createPoints",value:function(){for(var t=this.width,e=this.height,n=0;n<t;n+=t/20)for(var a=0;a<e;a+=e/20){var i=n+Math.random()*t/20,o=a+Math.random()*e/20,r={x:i,originX:i,y:o,originY:o};this.points.push(r)}for(var s=0;s<this.points.length;s++){for(var c=[],l=this.points[s],u=s+1;u<this.points.length;u++){for(var h=this.points[u],d=!1,m=0;m<5;m++)d||void 0===c[m]&&(c[m]=h,d=!0);for(var f=0;f<5;f++)d||this.getDistance(l,h)<this.getDistance(l,c[f])&&(c[f]=h,d=!0)}l.closest=c,l.radius=2+2*Math.random(),this.shakePoint(l)}}},{key:"shakePoint",value:function(t){var e=this;g.c.to(t,1+1*Math.random(),{x:t.originX-50+100*Math.random(),y:t.originY-50+100*Math.random(),ease:p.a.easeInOut,onComplete:function(){e.shakePoint(t)}})}},{key:"drawPoint",value:function(t,e){t.pointActive&&(e.beginPath(),e.arc(t.x,t.y,t.radius,0,2*Math.PI,!1),e.fillStyle="rgba(156,217,249,"+t.pointActive+")",e.fill())}},{key:"drawLines",value:function(t,e){if(t.lineActive){var n=!0,a=!1,i=void 0;try{for(var o,r=t.closest[Symbol.iterator]();!(n=(o=r.next()).done);n=!0){var s=o.value;e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(s.x,s.y),e.strokeStyle="rgba(156,217,249,"+t.lineActive+")",e.stroke()}}catch(c){a=!0,i=c}finally{try{n||null==r.return||r.return()}finally{if(a)throw i}}}}},{key:"getDistance",value:function(t,e){return Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)}},{key:"handleResize",value:function(){this.width=window.innerWidth,this.height=window.innerHeight,this.canvas.width=this.width,this.canvas.height=this.height}},{key:"handleMouseMove",value:function(t){var e=0,n=0;t.pageX||t.pageY?(e=t.pageX,n=t.pageY):(t.clientX||t.clientY)&&(e=t.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,n=t.clientY+document.body.scrollTop+document.documentElement.scrollTop),this.target.x=e,this.target.y=n}},{key:"init",value:function(){var t=this;this.createCanvas(),this.createPoints(),this.start(),window.onresize=function(e){return t.handleResize(e)},window.onmousemove=function(e){return t.handleMouseMove(e)}}},{key:"start",value:function(){var t=this,e=this.width,n=this.height,a=this.getDistance,i=this.points,o=this.ctx,r=this.target,s=this.requestAnimationFrame;this.ctx.clearRect(0,0,e,n);var c=!0,l=!1,u=void 0;try{for(var h,d=i[Symbol.iterator]();!(c=(h=d.next()).done);c=!0){var m=h.value;Math.abs(a(r,m))<4e3?(m.lineActive=.3,m.pointActive=.6):Math.abs(a(r,m))<2e4?(m.lineActive=.1,m.pointActive=.3):Math.abs(a(r,m))<4e4?(m.lineActive=.02,m.pointActive=.1):(m.lineActive=0,m.pointActive=0),this.drawLines(m,o),this.drawPoint(m,o)}}catch(f){l=!0,u=f}finally{try{c||null==d.return||d.return()}finally{if(l)throw u}}this.myReq=s(function(){return t.start()})}},{key:"destory",value:function(){(0,this.cancelAnimationFrame)(this.myReq),window.onresize=null,window.onmousemove=null}}]),t}(),b=n(944),y=(n(361),n(218)),w=n(943),k=n(946),x=n(183),j=n(357),O=n(45),E=function(t){function e(){var t,n;Object(i.a)(this,e);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(r.a)(this,(t=Object(s.a)(e)).call.apply(t,[this].concat(o)))).handleSubmit=function(t){t.preventDefault(),n.props.form.validateFields(function(t,e){if(!t){var a={accoutNo:e.username,password:e.password};Object(O.a)({url:"/user/users/login/password",type:"formdata",isToken:!1,data:a}).then(function(t){console.log(t),t.data.token&&n.props.loginSubmit(t.data.token).then(function(t){n.props.redirectPath()}).catch(function(t){console.log(t)})}).catch(function(t){console.log(t,"e")})}})},n.vallidatorMobile=function(t,e,n){/^1[3-9]\d{9}$/.test(e)||"admin"==e||n("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7"),n()},n.vallidatorPassword=function(t){var e=n.props.form;e.getFieldsValue("mobile")||e.setFieldsValue({password:""})},n}return Object(c.a)(e,t),Object(o.a)(e,[{key:"render",value:function(){var t=this.props.form.getFieldDecorator;return u.a.createElement(w.a,{className:"login-form",onSubmit:this.handleSubmit},u.a.createElement(w.a.Item,null,t("username",{rules:[{required:!0,message:"\u624b\u673a\u53f7\u5fc5\u586b"},{validator:this.vallidatorMobile}]})(u.a.createElement(k.a,{prefix:u.a.createElement(x.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"\u624b\u673a\u53f7"}))),u.a.createElement(w.a.Item,null,t("password",{rules:[{required:!0,message:"\u5bc6\u7801"}]})(u.a.createElement(k.a,{prefix:u.a.createElement(x.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"\u5bc6\u7801",type:"password"}))),u.a.createElement(w.a.Item,null,u.a.createElement(j.a,{type:"primary",htmlType:"submit",className:"login-form-button",style:A.Button},"\u767b\u5f55")))}}]),e}(l.Component),A={Button:{background:"rgba(0,0,0,.25)",width:"100%",color:"#a9a9a9",border:"none"}},P=w.a.create({name:"normal_login"})(E),M=n(936),S=n(467),C=n(468),I=function(t){var e=Object(l.useState)(t),n=Object(y.a)(e,2),a=n[0],i=n[1];return{value:a,onChange:Object(l.useCallback)(function(t){i(t.currentTarget.value)},[])}};l.Component;var T=function(){var t=I(""),e=I(""),n=Object(l.useState)(!1),a=Object(y.a)(n,2),i=a[0],o=a[1],r=Object(l.useState)(10),s=Object(y.a)(r,2),c=s[0],h=s[1],d=Object(l.useState)(null),m=Object(y.a)(d,2),f=m[0],g=m[1],p=Object(l.useState)("\u53d1\u9001\u9a8c\u8bc1\u7801"),v=Object(y.a)(p,2),b=v[0],w=v[1];!function(t,e){var n=Object(l.useRef)();Object(l.useEffect)(function(){n.current=t},[t]),Object(l.useEffect)(function(){var t;if(null!=e)return t=setInterval(function(){n.current(),console.log(t,"id")},e),function(){return clearInterval(t)}},[e])}(function(){console.log("count",c),0===c?(w("\u91cd\u65b0\u53d1\u9001"),h(59),o(!1),g(null)):(h(c-1),w(c+"\u79d2\u540e\u91cd\u8bd5"))},f);return u.a.createElement("form",{className:"login-form"},u.a.createElement("div",{className:"form-item"},u.a.createElement(x.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),u.a.createElement("input",Object.assign({className:"has-icon",id:"mobile",name:"mobile"},t,{placeholder:"\u624b\u673a\u53f7"}))),u.a.createElement("div",{className:"form-item"},u.a.createElement(S.a,{gutter:8},u.a.createElement(C.a,{span:12},u.a.createElement(x.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),u.a.createElement("input",Object.assign({className:"has-icon",id:"code",name:"code"},e,{placeholder:"\u9a8c\u8bc1\u7801"}))),u.a.createElement(C.a,{span:12},u.a.createElement(j.a,{style:{width:"100%"},onClick:function(e){if(t.value)return!i&&void Object(O.a)("user/getCode").then(function(t){o(!0),g(1e3)});M.a.error("\u624b\u673a\u53f7\u4e0d\u5408\u6cd5",3)}},b)))),u.a.createElement("div",{className:"form-item"},u.a.createElement(j.a,{type:"primary",onClick:function(){if(function(){var n="";return t.value?i&&!e.value?n="\u8bf7\u8f93\u5165\u83b7\u53d6\u7684\u9a8c\u8bc1\u7801":i?function(t){return!!t&&/^1[3-9][0-9]\d{8}$/.test(t)}(t.value)||(n="\u624b\u673a\u53f7\u4e0d\u5408\u6cd5"):n="\u8bf7\u83b7\u53d6\u9a8c\u8bc1\u7801":n="\u8bf7\u8f93\u5165\u624b\u673a\u53f7\u7801",n&&M.a.error(n,3),!n}()){var n={mobile:t.value,code:e.value};console.log(n)}},style:A.Button,className:"login-form-button"},"\u767b\u5f55")))};T.getInitialProps=function(){return{initInfo:"test"}};var F=T,z="https://github.com/zhangZhiHao1996/image-store/blob/master/react-admin-master/bg1.jpg?raw=true",N=[{key:"password",tab:"\u5bc6\u7801\u767b\u5f55"},{key:"message",tab:"\u77ed\u4fe1\u767b\u5f55"}],q=function(t){function e(t){var n;return Object(i.a)(this,e),(n=Object(r.a)(this,Object(s.a)(e).call(this,t))).initPage=function(){console.log(n.props),n.setState({loading:!0}),n.redirectPath(),n.loadImageAsync(z).then(function(t){n.setState({loading:!1,url:t})}).then(function(){n.particle=new v("backgroundBox"),n.particle.init()})},n.redirectPath=function(){var t=n.props,e=t.islogin,a=t.history,i=t.location;if(e){var o=i.state?i.state.from.pathname:"/";console.log(i,"location",o),a.push("/")}},n.onTabChange=function(t,e){n.setState(Object(a.a)({},e,t))},n.state={url:"",loading:!1,activeTab:"password"},n}return Object(c.a)(e,t),Object(o.a)(e,[{key:"componentDidMount",value:function(){this.initPage()}},{key:"componentWillUnmount",value:function(){this.particle&&this.particle.destory()}},{key:"loadImageAsync",value:function(t){return new Promise(function(e,n){var a=new Image;a.onload=function(){e(t)},a.onerror=function(){n("\u56fe\u7247\u52a0\u8f7d\u51fa\u9519")},a.src=t})}},{key:"render",value:function(){var t=this;return u.a.createElement("div",{className:"login-container",id:"backgroundBox",style:R.backgroundBox},u.a.createElement(b.a,{className:"container",style:{width:"300px"},tabList:N,activeTabKey:this.state.activeTab,onTabChange:function(e){t.onTabChange(e,"activeTab")}},"message"===this.state.activeTab?u.a.createElement(F,Object.assign({},this.props,{redirectPath:this.redirectPath.bind(this)})):u.a.createElement(P,Object.assign({},this.props,{redirectPath:this.redirectPath.bind(this)}))))}}]),e}(l.Component);q.contextTypes={router:m.a.object.isRequired};var R={backgroundBox:{position:"fixed",top:"0",left:"0",width:"100vw",height:"100vh",backgroundImage:"url(https://github.com/zlc140/zlc-blog/blob/master/docs/.vuepress/public/img/contact-bg.jpg?raw=true)",backgroundSize:"100% 100%",transition:"all .5s"}};e.default=Object(h.b)(function(t){return console.log(t),{islogin:!!t.userInfo}},function(t){return{loginSubmit:function(e){return t(Object(f.c)(e))}}})(q)}}]);
//# sourceMappingURL=14.e3fee9c8.chunk.js.map